-- Jayden Taylor X Github

local CRATE_NAME = "BaseCrate"

local SPAWN_FOLDER = workspace:WaitForChild("SpawnedItems")
local AREA_FOLDERS = {
    "ItemSpawnArea1_Items",
    "ItemSpawnArea2_Items"
}

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
if not LocalPlayer then return end

-- UI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "TeleportToolUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 200, 0, 50)
frame.Position = UDim2.new(0.05, 0, 0.2, 0)
frame.BackgroundColor3 = Color3.fromRGB(40,40,40)
frame.BorderSizePixel = 2
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local label = Instance.new("TextLabel")
label.Size = UDim2.new(1, 0, 1, 0)
label.BackgroundTransparency = 1
label.Text = "Teleport Script Active"
label.TextColor3 = Color3.fromRGB(255,255,255)
label.Font = Enum.Font.SourceSansBold
label.TextScaled = true
label.Parent = frame

-- Teleport
local function teleportToCrate(crateModel)
    local character = LocalPlayer.Character
    if not character then return end

    local root = character:FindFirstChild("HumanoidRootPart")
    if not root then return end

    local originalCFrame = root.CFrame

    local targetPart =
        crateModel.PrimaryPart
        or crateModel:FindFirstChildWhichIsA("BasePart")

    if targetPart then
        root.CFrame = targetPart.CFrame + Vector3.new(0, 5, 0)
        task.wait(2)
        root.CFrame = originalCFrame
    end
end

local function listenForCrates(folder)
    folder.ChildAdded:Connect(function(obj)
        if obj.Name == CRATE_NAME then
            teleportToCrate(obj)
        end
    end)

    for _, obj in ipairs(folder:GetChildren()) do
        if obj.Name == CRATE_NAME then
            teleportToCrate(obj)
        end
    end
end
-- I dont remember, dont question me.
for _, folderName in ipairs(AREA_FOLDERS) do
    local folder = SPAWN_FOLDER:WaitForChild(folderName)
    listenForCrates(folder)
end

print("Teleport script loaded for:", LocalPlayer.Name)
